<!--
 * @Author: Kris_wu
-->
# 项目名称： - 本地代码仓的智能训练数据生成系统

## 1. 项目概述 (Overview)

CodeKnowBot 是一个旨在解决“如何为本地代码库高效生成高质量AI训练数据”问题的自动化框架。本项目根据一份面试作业的要求设计，核心目标是深入分析一个给定的代码仓库，并围绕其业务逻辑、流程与架构，智能生成两种关键类型的训练数据：
1.  **业务逻辑问答 (Business Logic QA):** 自动生成关于代码功能、流程和规则的问答对。
2.  **架构设计方案 (Architectural Design Solutions):** 根据新的需求，生成基于现有代码库的实现方案。

系统的核心是利用大型语言模型（以 Qwen 2.5 为基础），结合精确的静态代码分析技术，将代码库转化为一个可查询的知识图谱，并在此基础上实现高质量、可追溯的数据生成。

## 2. 核心特性 (Features)

-   **深度代码分析**: 不仅仅是文本匹配，而是通过抽象语法树（AST）理解代码的结构、关系和依赖。
-   **自动化QA生成**: 自动识别代码中的核心业务逻辑，并生成相关的问答对。
-   **智能设计方案**: 基于RAG（检索增强生成）模式，为新需求提供贴合现有架构的设计建议。
-   **完全可追溯**: 所有生成的内容都包含 `trace` 字段，可以精确链接回源代码，确保数据的可信度。
-   **高度可扩展**: 模块化设计，轻松支持新的编程语言、分析维度或更换底层LLM。
-   **结构化输出**: 生成标准化的JSON格式数据，可直接用于下游小模型的微调。

## 3. 系统架构 (System Architecture)

本系统采用流水线（Pipeline）架构，主要由以下模块构成：

1.  **代码摄取与解析 (Code Ingestion & Parsing)**: 克隆Git仓库，并使用`Tree-sitter`等工具将源代码转换为AST。
2.  **静态分析与知识提取 (Static Analysis & Knowledge Extraction)**: 遍历AST，提取代码实体（类、函数）和它们之间的关系（调用、继承），构建一个**代码知识图谱 (Code Knowledge Graph)**。
3.  **智能生成引擎 (Intelligent Generation Engine)**:
    * **QA生成器**: 查询知识图谱，结合LLM生成业务逻辑问答。
    * **设计方案生成器**: 根据用户需求，在知识图谱中检索相关上下文，并指导LLM生成设计方案。
4.  **数据处理与格式化 (Data Processing & Formatting)**: 清洗、校验并统一输出为结构化的JSON训练数据。

## 4. 技术栈 (Technology Stack)

-   **核心语言**: Python 3.9+
-   **代码解析**: `ast` (内置库, for Python), `tree-sitter` (for multi-language support)
-   **大语言模型**: Qwen 2.5 (或任何支持API调用的LLM，如Llama, GPT系列)
-   **依赖管理**: `pip`

## 5. 如何运行 (Usage)

python hsbc.py

# 建议在虚拟环境中安装
# 本脚本无外部依赖
